USE [master]
GO

ALTER DATABASE [RSM] ADD FILEGROUP [20200515]
ALTER DATABASE [RSM] ADD FILEGROUP [20200516]
ALTER DATABASE [RSM] ADD FILEGROUP [20200517]
ALTER DATABASE [RSM] ADD FILEGROUP [20200518]
ALTER DATABASE [RSM] ADD FILEGROUP [20200519]
ALTER DATABASE [RSM] ADD FILEGROUP [20210515]
ALTER DATABASE [RSM] ADD FILEGROUP [20210516]
ALTER DATABASE [RSM] ADD FILEGROUP [20210517]
ALTER DATABASE [RSM] ADD FILEGROUP [20210518]
ALTER DATABASE [RSM] ADD FILEGROUP [20210519]
ALTER DATABASE [RSM] ADD FILEGROUP [TABLE_RESERVE]
GO

USE [master]
GO
ALTER DATABASE [RSM] ADD FILE ( NAME = N'20200515', FILENAME = N'E:\partition\T_DATA_DAY_WHS_ART_CNT_TEST\20200515.mdf' , SIZE = 3072KB , FILEGROWTH = 41943040KB ) TO FILEGROUP [20200515]
ALTER DATABASE [RSM] ADD FILE ( NAME = N'20200516', FILENAME = N'E:\partition\T_DATA_DAY_WHS_ART_CNT_TEST\20200516.mdf' , SIZE = 3072KB , FILEGROWTH = 41943040KB ) TO FILEGROUP [20200516]
ALTER DATABASE [RSM] ADD FILE ( NAME = N'20200517', FILENAME = N'E:\partition\T_DATA_DAY_WHS_ART_CNT_TEST\20200517.mdf' , SIZE = 3072KB , FILEGROWTH = 41943040KB ) TO FILEGROUP [20200517]
ALTER DATABASE [RSM] ADD FILE ( NAME = N'20200518', FILENAME = N'E:\partition\T_DATA_DAY_WHS_ART_CNT_TEST\20200518.mdf' , SIZE = 3072KB , FILEGROWTH = 41943040KB ) TO FILEGROUP [20200518]
ALTER DATABASE [RSM] ADD FILE ( NAME = N'20200519', FILENAME = N'E:\partition\T_DATA_DAY_WHS_ART_CNT_TEST\20200519.mdf' , SIZE = 3072KB , FILEGROWTH = 41943040KB ) TO FILEGROUP [20200519]
ALTER DATABASE [RSM] ADD FILE ( NAME = N'20210515', FILENAME = N'E:\partition\T_DATA_DAY_WHS_ART_CNT_TEST\20210515.mdf' , SIZE = 3072KB , FILEGROWTH = 41943040KB ) TO FILEGROUP [20210515]
ALTER DATABASE [RSM] ADD FILE ( NAME = N'20210516', FILENAME = N'E:\partition\T_DATA_DAY_WHS_ART_CNT_TEST\20210516.mdf' , SIZE = 3072KB , FILEGROWTH = 41943040KB ) TO FILEGROUP [20210516]
ALTER DATABASE [RSM] ADD FILE ( NAME = N'20210517', FILENAME = N'E:\partition\T_DATA_DAY_WHS_ART_CNT_TEST\20210517.mdf' , SIZE = 3072KB , FILEGROWTH = 41943040KB ) TO FILEGROUP [20210517]
ALTER DATABASE [RSM] ADD FILE ( NAME = N'20210518', FILENAME = N'E:\partition\T_DATA_DAY_WHS_ART_CNT_TEST\20210518.mdf' , SIZE = 3072KB , FILEGROWTH = 41943040KB ) TO FILEGROUP [20210518]
ALTER DATABASE [RSM] ADD FILE ( NAME = N'20210519', FILENAME = N'E:\partition\T_DATA_DAY_WHS_ART_CNT_TEST\20210519.mdf' , SIZE = 3072KB , FILEGROWTH = 41943040KB ) TO FILEGROUP [20210519]
ALTER DATABASE [RSM] ADD FILE ( NAME = N'TABLE_RESERVE', FILENAME = N'E:\partition\T_DATA_DAY_WHS_ART_CNT_TEST\TABLE_RESERVE.mdf' , SIZE = 3072KB , FILEGROWTH = 41943040KB ) TO FILEGROUP [TABLE_RESERVE]
GO


USE [RSM]
GO
BEGIN TRANSACTION


CREATE PARTITION FUNCTION [RSM_T_DATA_DAY_WHS_ART_CNT_TEST_PARTITION_FUNCTION](date) AS RANGE RIGHT FOR VALUES (N'2020-05-15',N'2020-05-16',N'2020-05-17',N'2020-05-18',N'2020-05-19',N'2021-05-15',N'2021-05-16',N'2021-05-17',N'2021-05-18',N'2021-05-19' )

CREATE PARTITION SCHEME [RSM_T_DATA_DAY_WHS_ART_CNT_TEST_PARTITION_SCHEME] AS PARTITION [RSM_T_DATA_DAY_WHS_ART_CNT_TEST_PARTITION_FUNCTION] TO ([20200515],[20200516],[20200517],[20200518],[20200519],[20210515],[20210516],[20210517],[20210518],[20210519], [TABLE_RESERVE])

COMMIT TRANSACTION

USE [RSM]
GO
CREATE CLUSTERED INDEX [ClusteredIndex-20210521-120028] ON [dbo].[T_DATA_DAY_WHS_ART_CNT_test]
(
	[DATA_TAG] ASC,
	[DAY_ID] ASC,
	[WHS_ID] ASC,
	[ART_ID] ASC,
	[CNTR_KIS_ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = ON, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [RSM_T_DATA_DAY_WHS_ART_CNT_TEST_PARTITION_SCHEME]([day_id])
GO


CREATE NONCLUSTERED INDEX [DAY PARTITIONS] ON [dbo].[T_DATA_DAY_WHS_ART_CNT_TEST] 
(
	[day_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = ON, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [RSM_T_DATA_DAY_WHS_ART_CNT_TEST_PARTITION_SCHEME]([day_id])
